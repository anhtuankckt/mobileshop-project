<%- include("./layout/head.ejs", {title: "Category"}) -%>
<%- include("./layout/header.ejs") -%>
<%- include("./layout/menu.ejs") -%>
<%- include("./layout/slider.ejs") -%>

<!--	List Product	-->
<div class="products">
  <h3><%=category?.title%> (hiện có <%=totalRows%> sản phẩm)</h3>
  <% if (products && products.length > 0) { %>
  <div class="product-list card-deck">
    <% for (let product of products) { %>
    <%- include('./components/productItem.ejs', {item: product}) -%>
    <% } %>
  </div>
  <% } %>
</div>
<!--	End List Product	-->

<% if (products && products.length > 0) { %>
<div id="pagination">
  <ul class="pagination">
    <% if (currentPage > 1) { %>
    <li class="page-item"><a class="page-link" href="/category/<%=category._id%>?page=<%=currentPage - 1%>">Trang trước</a></li>
    <% } %>

    <% (pages && pages?.forEach((page) => { %>
    <% if (page === '...') { %>
    <li class="page-item"><span class="page-link"><%=page%></span></li>
    <% } else { %>
    <li class="page-item <%=currentPage == page && 'active'%>"><a class="page-link" href="/category/<%=category?._id%>?page=<%=page%>"><%=page%></a></li>
    <% } %>
    <% })) %>

    <% if (currentPage < totalPages) { %>
    <li class="page-item"><a class="page-link" href="/category/<%=category?._id%>?page=<%=currentPage + 1%>">Trang sau</a></li>
    <% } %>
  </ul>
</div>
<% } %>

<%- include("./layout/sidebar.ejs") -%>
<%- include("./layout/footer.ejs") -%>